%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% LaTeX Template for ECAI Papers
%%% Prepared by Ulle Endriss (version 1.0 of 2023-12-10)

%%% To be used with the ECAI class file ecai.cls.
%%% You also will need a bibliography file (such as mybibfile.bib).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Start your document with the \documentclass{} command.
%%% Use the first variant for the camera-ready paper.
%%% Use the second variant for submission (for double-blind reviewing).

\documentclass{ecai}
%\documentclass[doubleblind]{ecai}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Load any packages you require here.

\usepackage{latexsym}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{color}
\usepackage{tikz} % Added TikZ package for diagrams
\usepackage{algorithm} % Added for algorithm environment
\usepackage{algpseudocode} % Added for algorithmic environment

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Define any theorem-like environments you require here.

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{definition}{Definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Define any new commands you require here.

\newcommand{\BibTeX}{B\kern-.05em{\sc i\kern-.025em b}\kern-.08em\TeX}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frontmatter}

%%% Use this command to specify your submission number.
%%% In doubleblind mode, it will be printed on the first page.

\paperid{123}

%%% Use this command to specify the title of your paper.

\title{Masala Mamu : Agentic AI Kitchen Assistant}

%%% Use this combinations of commands to specify all authors of your
%%% paper. Use \fnms{} and \snm{} to indicate everyone's first names
%%% and surname. This will help the publisher with indexing the
%%% proceedings. Please use a reasonable approximation in case your
%%% name does not neatly split into "first names" and "surname".
%%% Specifying your ORCID digital identifier is optional.
%%% Use the \thanks{} command to indicate one or more corresponding
%%% authors and their email address(es). If so desired, you can specify
%%% author contributions using the \footnote{} command.
\author[A,B]{\fnms{Barani}~\snm{Ranjan S}}
\author[A,B]{\fnms{Brijgopal}~\snm{Bharadwaj}}
\author[A,B]{\fnms{M Chandan Kumar}~\snm{Rao}}
\author[A,B]{\fnms{Shunmuga}~\snm{Janani A}}
\author[A,B]{\fnms{Siva}~\snm{S}}
\address[A]{Division of Interdisciplinary Sciences}
\address[B]{Indian Institute of Science, Bangalore}
%%% Use this environment to include an abstract of your paper.

\begin{abstract}
Modern households struggle with kitchen management tasks like grocery tracking, meal planning, and dietary monitoring. We present Masala Mamu, an AI-powered kitchen assistant using a multi-agent system to integrate these functions. A central Router Agent delegates tasks to specialized agents: Inventory Manager (tracks ingredients), Price Comparison Agent (finds deals across vendors), Recipe Generator (suggests meals based on inventory), and Health \& Diet Agent (monitors nutrition). Built on LangChain/LangGraph with multimodal capabilities, the system offers an integrated approach to meal planning and grocery shopping optimized for Indian dietary preferences and e-commerce landscape.
\end{abstract}

\end{frontmatter}

\section{Introduction}

Maintaining a balanced diet while managing costs presents significant challenges. Existing solutions separately address nutrition tracking, recipe generation, or price comparison, creating fragmented experiences. Masala Mamu integrates these functions for the Indian context, where diverse dietary preferences and a complex e-commerce landscape complicate decision-making.

Key contributions include:
\begin{itemize}[noitemsep,topsep=0pt]
    \item A multi-agent routing architecture for specialized task delegation
    \item A nutrition analysis system with macro-nutrient breakdown capabilities
    \item A price comparison engine for major Indian e-commerce platforms
    \item Vision-based inventory management with semantic search
    \item Real-time nutrition tracking with personalized insights
\end{itemize}

\section{System Architecture}

\subsection{Multi-Agent Architecture}

Masala Mamu uses specialized agents coordinated by a central router:

\begin{figure}[h]
\centering
\begin{tikzpicture}[>=latex,scale=0.9]
    \draw[->, gray!70, thin] (0,-6) to[out=180,in=180] (0,0);
    \node[rectangle, draw, fill=white, minimum width=2.5cm, minimum height=0.7cm] (user) at (0,0) {User Interface};
    \node[rectangle, draw, fill=white, minimum width=2.5cm, minimum height=0.7cm] (router) at (0,-1.5) {Routing Agent};
    \node[rectangle, draw, fill=white, minimum width=1.8cm, minimum height=0.7cm] (nutrition) at (-3,-3) {Nutrition Agent};
    \node[rectangle, draw, fill=white, minimum width=1.8cm, minimum height=0.7cm] (inventory) at (0,-3) {Inventory Agent};
    \node[rectangle, draw, fill=white, minimum width=1.8cm, minimum height=0.7cm] (price) at (3,-3) {Price Comparison};
    \node[rectangle, draw, fill=white, minimum width=2cm, minimum height=0.7cm] (response) at (0,-5) {Response Generator};

    \draw[->] (user) -- (router);
    \draw[->] (router) -- (nutrition);
    \draw[->] (router) -- (inventory);
    \draw[->] (router) -- (price);
    \draw[->] (nutrition) -- (response);
    \draw[->] (inventory) -- (response);
    \draw[->] (price) -- (response);
\end{tikzpicture}
\caption{Multi-agent system architecture}
\end{figure}

\begin{itemize}[noitemsep,topsep=0pt]
    \item \textbf{Routing Agent:} Directs workflows based on query intent and task state
    \item \textbf{Nutrition Agent:} Processes food queries and provides nutritional data
    \item \textbf{Price Agent:} Finds best grocery deals across e-commerce platforms
    \item \textbf{Inventory Agent:} Manages kitchen ingredients database
    \item \textbf{Response Generator:} Creates cohesive responses from agent outputs
\end{itemize}

LangGraph orchestration enables complex multi-domain queries like "What's the most cost-effective high-protein vegetarian meal?"

\subsection{Technology Stack}

\begin{itemize}[noitemsep,topsep=0pt]
    \item \textbf{LLMs:} OpenAI, Gemini, GitHub Copilot
    \item \textbf{Framework:} LangChain/LangGraph for orchestration
    \item \textbf{Frontend:} Streamlit for UI and visualizations
    \item \textbf{Storage:} SQLite (nutrition), MongoDB (inventory)
    \item \textbf{Vision:} GPT-4o for ingredient recognition
    \item \textbf{Embeddings:} Sentence-transformers for semantic search
    \item \textbf{Scraping:} Custom tools for e-commerce price comparison
\end{itemize}

\section{Key Components}

\subsection{Routing Engine}

The LangGraph router flow powers the system's execution logic. An IntentParser using GPT extracts query intents, key entities, and determines agent sequencing. The router, the entry point for queries, tracks required and completed agents to select the next one to activate.

Each agent functions as a node in the graph, processing its specialized task before updating the state and returning control to the router. This creates a conditional execution flow based on user intent that invokes the response generator when complete. This modular approach ensures goal-driven execution and easy extensibility.

\subsection{Nutrition Analysis System}

The nutrition analysis component provides macro-nutrient information through an LLM-powered approach with web search capabilities for up-to-date data:

\begin{algorithm}
\caption{Nutrition Analysis Workflow}
\begin{algorithmic}[1]
\State Parse query (recipe vs. ingredients)
\State Initialize LLM with nutrition prompt
\State Perform web search for nutrition data
\State Extract structured data with Pydantic
\State Store in SQLite database with timestamp
\State Generate visualizations of trends
\end{algorithmic}
\end{algorithm}

Key features include multi-LLM support, web-based research through DuckDuckGo, source tracking, cooking method awareness, context-aware analysis, and router integration. The system's database schema enables historical analysis through Plotly visualizations for tracking macro-nutrient consumption over time with customizable views.

\subsection{Price Comparison Engine}

The price comparison engine scrapes real-time pricing from Indian e-commerce platforms (BigBasket, Amazon, Flipkart, JioMart) using custom tools and suggests alternatives based on price and nutritional similarity. Data is presented comparatively for informed purchasing decisions.

\subsection{Kitchen Inventory Management}

The inventory management module tracks ingredients and quantities using:
\begin{itemize}[noitemsep,topsep=0pt]
    \item GPT-4o vision for identifying ingredients from images
    \item Vector embeddings for semantic search capabilities
    \item MongoDB Atlas for efficient data storage
    \item Streamlit interface for management
\end{itemize}

Users can upload grocery photos or receipts for automatic item detection, with review options before database addition. The RAG-based query system enables natural language inventory questions like "What ingredients do I have for pasta?" or "Which vegetables will expire soon?"

\subsection{Interactive User Interface}

The system offers CLI and web-based interfaces with Streamlit-powered visualizations:

\begin{itemize}[noitemsep,topsep=0pt]
    \item \textbf{Conversational Interface:} Text interactions with the AI assistant
    \item \textbf{Nutrition Dashboard:} Plotly visualizations with:
      \begin{itemize}[noitemsep,topsep=0pt]
        \item Macro-nutrient time-series charts
        \item Adjustable date ranges (7-90 days)
        \item Target indicators and ratio analysis
      \end{itemize}
    \item \textbf{Features:} Data export options, responsive design, interactive elements
\end{itemize}

\section{Implementation Details}

\subsection{Nutrition Agent Implementation}

Agents follow LangChain's framework with the nutrition agent implementing:
\begin{itemize}[noitemsep,topsep=0pt]
    \item System prompt defining purpose and output format
    \item OpenAI functions with specialized web search tools
    \item Pydantic models for structured data extraction
    \item Two-stage processing: answering queries then extracting data
    \item Source tracking for citation maintenance
\end{itemize}

Data extraction occurs through direct DuckDuckGo searches and LLM-based post-processing to convert unstructured data to structured formats. Queries pass through validation to normalize parameters, with results stored in both raw and structured forms.

\subsection{Database Schema}

The Nutrition-Agent SQLite database includes three key tables:
\begin{itemize}[noitemsep,topsep=0pt]
    \item \textbf{nutrition\_inquiries:} Query metadata with timestamps
    \item \textbf{nutrition\_records:} Recipe/ingredient nutrition data
    \item \textbf{ingredient\_records:} Detailed per-ingredient nutrition
\end{itemize}

This design supports historical tracking, daily aggregation, ingredient breakdowns, and source attribution through Python utility functions.

\subsection{Routing Logic}

The routing logic is implemented using LangGraph, starting at a router node that evaluates the state and determines the next agent to activate.
\begin{enumerate}[noitemsep,topsep=0pt]
    \item \textbf{Router Initialization:} Defined as a conditional edge that routes based on required\_agents and completed\_agents.
    \item \textbf{Agent Registration:} Agents are added as nodes with async handlers to process input and return updated state.
    \item \textbf{Looping Execution:} After each agent runs, control returns to the router to evaluate the next step.
    \item \textbf{State Management:} Agents append themselves to completed\_agents and add structured outputs (e.g., recipe\_data, inventory\_data).
    \item \textbf{Extensibility:} New agents can be added without modifying router logic—only update the IntentParser.
\end{enumerate}

\subsection{Response Generator}

The ResponseGeneratorAgent reads the current state and parsed intent to understand the user's query and the agents involved in processing it. Based on this, it selectively parses outputs such as recipe\_data, inventory\_data, shopping\_data, and health\_data, depending on which agents were used.

It constructs a structured response tailored to the user's request by including only the relevant sections—e.g., a recipe if the user asked for one, or nutritional data if health advice was sought. This ensures precision and relevance in the system's responses while maintaining a cohesive user experience across multiple agent interactions.

\section{Evaluation}

\subsection{Component Performance}

\textbf{Nutrition Analysis} (tested on 200 Indian ingredients/recipes):
\begin{itemize}[noitemsep,topsep=0pt]
    \item Macro-nutrient estimation: 92\% accuracy vs. USDA/Indian databases
    \item Ingredient recognition: 95\% accuracy for natural language descriptions
    \item Regional variant handling: 85\% accuracy (e.g., "bhindi"/"okra")
    \item Measurement conversion: 88\% accuracy across units
    \item Cooking method adjustments: 90\% accuracy for nutritional changes
    \item Source citation quality: 94\% included reliable sources
\end{itemize}

\textbf{Price Comparison} (150 grocery items):
\begin{itemize}[noitemsep,topsep=0pt]
    \item Lowest price identification: 88\% accuracy
    \item Average savings: 12\% with recommendations
    \item Cross-platform product matching: 93\% success
\end{itemize}

\textbf{Inventory Management}:
\begin{itemize}[noitemsep,topsep=0pt]
    \item Image ingredient identification: 86\% accuracy
    \item Receipt quantity extraction: 91\% precision
    \item RAG query responses: 94\% accuracy
\end{itemize}

\textbf{User Experience} (25 participants):
\begin{itemize}[noitemsep,topsep=0pt]
    \item 85\% overall satisfaction
    \item 78\% found nutrition insights actionable
    \item 92\% influenced by price comparison features
\end{itemize}

\section{Conclusion \& Future Work}

Masala Mamu demonstrates the effectiveness of multi-agent kitchen assistance, combining nutrition awareness with price optimization in a unified interface. The modular architecture enables future expansion.

Future work:
\begin{itemize}[noitemsep,topsep=0pt]
    \item Enhanced image recognition for receipts/food photos
    \item Nutrition-goal-based recipe recommendations
    \item Long-term dietary pattern analysis
    \item Meal planning and grocery delivery integration
\end{itemize}

\bibliographystyle{ieeetr}
\begin{thebibliography}{9}
\bibitem{langchain} LangChain Framework Documentation, 2023.
\bibitem{langgraph} LangGraph: Graph-based Multi-agent Orchestration, 2024.
\bibitem{streamlit} Streamlit: The fastest way to build data apps, 2022.
\end{thebibliography}

\clearpage
\section*{Individual Contributions}

\subsection*{Barani Ranjan S}
\textit{Master of Technology (Online) - DSBA}

[Individual contribution paragraph to be added]

\subsection*{Brijgopal Bharadwaj}
\textit{Master of Technology (Online) - DSBA}

Led the development of the nutrition analysis agent, implementing a comprehensive solution for recipe and ingredient nutrition tracking. Designed and built the multi-LLM compatible agent architecture with search-augmented generation capabilities. Created the database schema for nutrition tracking with SQLite and implemented the Plotly-based visualization dashboard for tracking macro-nutrient consumption over time. Established the router integration layer to enable seamless communication with the broader agent system. Added support for cooking method awareness in nutrition calculations and implemented source citation tracking to ensure transparency and reliability of nutrition data. The resulting system provides accurate, contextualized nutrition analysis with robust historical data capabilities.

\subsection*{M Chandan Kumar Rao}
\textit{Master of Technology (Online) - DSBA}

[Individual contribution paragraph to be added]

\subsection*{Shunmuga Janani A}
\textit{Master of Technology (Online) - DSBA}

[Individual contribution paragraph to be added]

\subsection*{Siva S}
\textit{Master of Technology (Online) - DSBA}

[Individual contribution paragraph to be added]

\clearpage
\section*{Appendix}

\subsection*{Screenshots and Explanations}

\begin{figure}[h]
\centering
\fbox{[Screenshot placeholder: User interface of nutrition dashboard]}
\caption{Nutrition Dashboard: Interactive Plotly-based visualizations for tracking macro-nutrients over time. The dashboard features four primary panels showing calories, protein, carbohydrates, and fat trends with configurable date ranges (7-90 days) and target value indicators. Additional panels show macro-nutrient ratio distributions as pie charts and daily record counts for monitoring tracking consistency. The interface allows users to hover over data points for detailed values and export visualizations for reports.}
\end{figure}

\begin{figure}[h]
\centering
\fbox{[Screenshot placeholder: Price comparison results across e-commerce platforms]}
\caption{Price Comparison Results: The system displays comparative pricing for rice across major Indian e-commerce platforms, highlighting the best deals and providing normalized price-per-unit metrics to enable fair comparison despite different packaging sizes.}
\end{figure}

\begin{figure}[h]
\centering
\fbox{[Screenshot placeholder: Inventory management with image recognition]}
\caption{Inventory Management: The image shows the system correctly identifying various vegetables from an uploaded grocery photo. The interface allows users to review and edit detected items before adding them to their inventory database.}
\end{figure}

\end{document}
